<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kili Choir Admin</title>
  <link rel="icon" href="images/kili_logo.png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body { font-family:Arial,sans-serif; background:#4e0506; color:white; margin:0; padding:0; }
    body::before { content:""; position:absolute; top:0; left:0; width:100%; height:100%; backdrop-filter:blur(10px); background: rgba(128,0,0,0.5); z-index:-1; }
    #header{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background:rgba(255,255,255,0.1);z-index:20;position:relative;}
    .logo-group {display:flex; align-items:center; gap:10px;}
    .logo-group img {height:40px;}
    .hamburger{display:flex;flex-direction:column;justify-content:space-around;width:25px;height:20px;cursor:pointer;}
    .hamburger span{height:3px;background:white;border-radius:2px;}
    .dropdown{display:none;position:absolute;top:60px;left:15px;background: rgba(0,0,0,0.8);border-radius:5px;z-index:10;min-width:150px;overflow:hidden;}
    .dropdown a{display:block;padding:10px;color:white;text-decoration:none;transition:0.3s;}
    .dropdown a:hover{background: rgba(255,255,255,0.2);}
    #title{text-align:center;margin:30px 0 20px;z-index:10;position:relative;}
    #title h1{font-size:48px;} #title .kiliman{color:black;} #title .jaro{color:white;}
    #title p{font-style:italic;font-size:18px;}

    .table-container{max-width:900px;margin:20px auto;overflow-x:auto; background: rgba(0,0,0,0.6); border-radius:10px; padding:15px;}
    table{width:100%; border-collapse:collapse;}
    th, td{padding:10px; border:1px solid white; text-align:left;}
    th{background: rgba(255,255,255,0.2);}
    tr:nth-child(even){background: rgba(255,255,255,0.1);}
    @media(max-width:600px){#title h1{font-size:32px;}#title p{font-size:16px;}}
  </style>
</head>
<body>
  <div id="header">
    <div class="hamburger" onclick="toggleMenu()"><span></span><span></span><span></span></div>
    <div class="logo-group"><img src="images/kili_logo.png"><img src="images/uj_20_years.png"></div>
    <div class="dropdown" id="dropdown-menu">
      <a href="index.html">Home</a>
    </div>
  </div>

  <div id="title">
    <h1><span class="kiliman">KILI</span><span class="jaro">CHOIR</span></h1>
    <p>Registered Members</p>
  </div>

  <div class="table-container">
    <table id="members-table">
      <thead>
        <tr>
          <th>Email</th>
          <th>Full Name</th>
          <th>Contact</th>
          <th>Voice Type</th>
          <th>Residence</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDhl8-z01pNxtiL6kWwmla79OFzsOamHnA",
      authDomain: "kilimanjaro-28f6d.firebaseapp.com",
      projectId: "kilimanjaro-28f6d",
      storageBucket: "kilimanjaro-28f6d.appspot.com",
      messagingSenderId: "1034940817803",
      appId: "1:1034940817803:web:51be29aeff42e296870f8e"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const dropdown = document.getElementById('dropdown-menu');
    function toggleMenu(){ dropdown.style.display = dropdown.style.display==='block'?'none':'block'; }

    const tableBody = document.querySelector('#members-table tbody');
    db.collection('ChoirMembers').onSnapshot(snapshot=>{
      tableBody.innerHTML='';
      snapshot.forEach(doc=>{
        const data = doc.data();
        const tr = document.createElement('tr');
        tr.innerHTML=`<td>${doc.id}</td><td>${data.fullName}</td><td>${data.contact}</td><td>${data.voiceType}</td><td>${data.residence}</td>`;
        tableBody.appendChild(tr);
      });
    });
  </script>
</body>
</html>
